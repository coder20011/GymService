<app-user-menu></app-user-menu>
<section class="masthead">
    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-lg-10 col-xl-10">
                <div class="card rounded-3">
                    <div class="card-body p-4 p-md-5">
                        <h3 class="mb-4 pb-2 pb-md-0 mb-md-5 px-md-2 text-center">Calorie Calculator</h3>
                        <form [formGroup]="calorieForm">
                            <div formArrayName="calorieArray"
                                *ngFor="let calorie of getCalorie().controls; let i = index">
                                <div [formGroupName]="i">
                                    <div class="row">
                                        <div class="col-md-4 mb-4">
                                            <label for="categorySelect">Select Category:</label>
                                            <select name="categorySelect" formControlName="categorySelect"
                                                class="form-control" (change)="onSelectCategory(i)" required>
                                                <option *ngFor="let category of categoryList" [ngValue]="category">
                                                    {{category.categoryName}}</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4 mb-4">
                                            <label for="foodSelect">Select Food:</label>
                                            <select name="foodSelect" formControlName="foodSelect" class="form-control"
                                                (change)="onSelectFood(i)" required>
                                                <option *ngFor=" let food of foodList[i]" [ngValue]="food">
                                                    {{food.foodName}}
                                                </option>
                                            </select>
                                        </div>
                                        <div class="col-md-4 mb-4">
                                            <label for="quantity">Enter Quantity:</label>
                                            <input name="quantity" formControlName="quantity" type="number"
                                                placeholder={{units}} class="form-control"
                                                min="0" required>
                                        </div>
                                        <div class="col-6 mb-4">
                                            <button class="btn btn-danger" type="button"
                                                (click)="deleteCalorie(i)" [disabled]="i == 0" >Delete Item</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <button class="btn btn-primary" type="button" (click)="addCalorie()">Add
                                        Item</button>
                                </div>
                            </div>
                            <div class="mt-5">
                                <button class="btn btn-success" type="submit" (click)="submit()" [disabled]="!calorieForm.valid" >Calculate</button>
                            </div>
                        </form>
                        <div class="row text-warning text-center">
                            <h2>{{status}}</h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>